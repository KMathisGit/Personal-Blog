---
layout: 'base.njk'
---

<article>
    <time class="text-grayFont">{{ date | postDate }}</time>
    <h1>{{title}}</h1>
    <figure>
        <img src="{{ image }}" alt ="{{ imageAlt }}"/>
        <figcaption>
            {{ imageAlt }}
        </figcaption>
    </figure>

    {{ content | safe }}
</article>

<script>
    const codeBlocks = Array.from(document.querySelectorAll("pre[class*='language-']"));
    codeBlocks.forEach(el => {
        const copyBtn = document.createElement("a");
        copyBtn
            .classList
            .add("copy-btn");
        copyBtn.innerText = "copy";
        copyBtn.addEventListener("click", function (e) {
            document.execCommand("copy");
        });
        copyBtn.addEventListener("copy", function (e) {
            const btn = e.target;
            e.preventDefault();
            if (e.clipboardData) {
                const codeText = btn.previousElementSibling.innerText;
                e
                    .clipboardData
                    .setData("text/plain", codeText);
                console.log(e.clipboardData.getData("text"))
                btn.innerText = "copied";
                setTimeout(() => {
                    btn.innerText = "copy";
                }, 2000)
            }
        });
        el.appendChild(copyBtn);
    });
</script>